[debug] Created tunnel using local port: '53861'

[debug] SERVER: "127.0.0.1:53861"

[debug] Original chart version: ""
[debug] CHART PATH: /Users/mdebarros/Documents/ModusDocs/Projects/MojaLoop/git/fork/deploy/helm/account-lookup-service/chart-service

NAME:   sappy-lambkin
REVISION: 1
RELEASED: Thu Apr  4 16:11:52 2019
CHART: account-lookup-service-api-5.5.0
USER-SUPPLIED VALUES:
{}

COMPUTED VALUES:
affinity: {}
config:
  central_services_host: $release_name-centralledger-service
  central_services_port: 3001
  db_database: account_lookup_service
  db_driver: mysql
  db_host: $release_name-account-lookup-service-mysql
  db_password: OdonPianoX
  db_port: 3306
  db_type: mysql
  db_user: account_lookup_service
  end_point_cache:
    expiresIn: 180000
    generateTimeout: 30000
containers:
  admin:
    image:
      pullPolicy: IfNotPresent
      repository: mojaloop/account-lookup-service
      tag: v5.5.0
    service:
      ports:
        api:
          name: http-admin
          port: 4001
  api:
    image:
      pullPolicy: IfNotPresent
      repository: mojaloop/account-lookup-service
      tag: v5.5.0
    service:
      ports:
        api:
          name: http-api
          port: 4002
fullnameOverride: ""
ingress:
  annotations: {}
  enabled: true
  hosts:
  - acount-lookup-service.local
  path: /
  tls: []
init:
  enabled: true
  mysql:
    command: until mysql -h $db_host -P $db_port -u $db_user --password=$db_password  $db_database   -e
      'select version()' ; do echo waiting for MySQL; sleep 2; done;
    name: wait-for-mysql
    pullPolicy: Always
    repository: mysql
    tag: latest
metrics:
  config:
    defaultLabels:
      serviceName: account-lookup-service
    prefix: moja_
    timeout: 5000
  enabled: true
nameOverride: ""
nodeSelector: {}
replicaCount: 1
resources: {}
service:
  port: 80
  type: ClusterIP
tolerations: []

HOOKS:
MANIFEST:

---
# Source: account-lookup-service-api/templates/config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: sappy-lambkin-account-lookup-service-api
  labels:
      app: sappy-lambkin-account-lookup-service-api
      chart: account-lookup-service-api-5.5.0
      release: sappy-lambkin
      heritage: Tiller
data:
  default.json: "{\n  \"ADMIN_PORT\":  4001,\n  \"API_PORT\":  4002,\n  \"DATABASE_URI\": \"mysql://account_lookup_service:OdonPianoX@sappy-lambkin-account-lookup-service-mysql:3306/account_lookup_service\",\n  \"ENDPOINT_CACHE_CONFIG\": {\n    \"expiresIn\": 180000,\n    \"generateTimeout\": 30000\n  },\n  \"SWITCH_ENDPOINT\": \"http://sappy-lambkin-centralledger-service:3001\",\n  \"INSTRUMENTATION\": {\n    \"METRICS\": {\n      \"DISABLED\": false,\n      \"labels\": {\n        \"fspId\": \"*\"\n      },\n      \"config\": {\n        \"timeout\": 5000,\n        \"prefix\": \"moja_\",\n        \"defaultLabels\": {\n          \"serviceName\": \"account-lookup-service\"\n        }\n      }\n    }\n  }\n}\n\n"
  knexfile.js: "'use strict'\nconst migrationsDirectory = '../migrations'\nconst seedsDirectory = '../seeds'\nconst Config = require('../src/lib/config')\nmodule.exports = {\n    client: 'mysql',\n    version: '5.7',\n    connection: Config.DATABASE_URI,\n    migrations: {\n        directory: migrationsDirectory,\n        tableName: 'migration',\n    },\n    seeds: {\n        directory: seedsDirectory,\n        loadExtensions: ['.js']\n    }\n}\n"
---
# Source: account-lookup-service-api/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: sappy-lambkin-account-lookup-service-api
  labels:
    app.kubernetes.io/name: account-lookup-service-api
    helm.sh/chart: account-lookup-service-api-5.5.0
    app.kubernetes.io/instance: sappy-lambkin
    app.kubernetes.io/managed-by: Tiller
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/name: account-lookup-service-api
    app.kubernetes.io/instance: sappy-lambkin
---
# Source: account-lookup-service-api/templates/deployment.yaml
apiVersion: apps/v1beta2
kind: Deployment
metadata:
  name: sappy-lambkin-account-lookup-service-api
  labels:
    app.kubernetes.io/name: account-lookup-service-api
    helm.sh/chart: account-lookup-service-api-5.5.0
    app.kubernetes.io/instance: sappy-lambkin
    app.kubernetes.io/managed-by: Tiller
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: account-lookup-service-api
      app.kubernetes.io/instance: sappy-lambkin
  template:
    metadata:
      labels:
        app.kubernetes.io/name: account-lookup-service-api
        app.kubernetes.io/instance: sappy-lambkin
    spec:
      initContainers:
        - name: wait-for-mysql
          image: mysql:latest
          imagePullPolicy: Always
          command:
            - sh
            - "-c"
            - "until mysql -h sappy-lambkin-account-lookup-service-mysql -P 3306 -u account_lookup_service --password=OdonPianoX  account_lookup_service   -e 'select version()' ; do echo waiting for MySQL; sleep 2; done;"
      containers:
        - name: account-lookup-service-api
          image: "mojaloop/account-lookup-service:v5.5.0"
          imagePullPolicy: IfNotPresent
          ports:
            - name: http-api
              containerPort: 4002
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /health
              port: http-api
          readinessProbe:
            httpGet:
              path: /health
              port: http-api
          resources:
            {}
            
          volumeMounts:
          - name: sappy-lambkin-account-lookup-service-api-config-volume
            mountPath: /opt/account-lookup-service/config
      volumes:
        - name: sappy-lambkin-account-lookup-service-api-config-volume
          configMap:
            name: sappy-lambkin-account-lookup-service-api
            items:
            - key: default.json
              path: default.json
            - key: knexfile.js
              path: knexfile.js
---
# Source: account-lookup-service-api/templates/ingress.yaml
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: sappy-lambkin-account-lookup-service-api
  labels:
    app.kubernetes.io/name: account-lookup-service-api
    helm.sh/chart: account-lookup-service-api-5.5.0
    app.kubernetes.io/instance: sappy-lambkin
    app.kubernetes.io/managed-by: Tiller
spec:
  rules:
    - host: "acount-lookup-service.local"
      http:
        paths:
          - path: /
            backend:
              serviceName: sappy-lambkin-account-lookup-service-api
              servicePort: http
